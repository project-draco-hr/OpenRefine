{
  if (input.markSupported()) {
    return input;
  }
 else {
    ByteArrayOutputStream output=new ByteArrayOutputStream(64 * 1024);
    byte[] buffer=new byte[1024 * 4];
    long count=0;
    int n=0;
    while (-1 != (n=input.read(buffer))) {
      output.write(buffer,0,n);
      count+=n;
    }
    input.close();
    return new ByteArrayInputStream(output.toByteArray());
  }
}
