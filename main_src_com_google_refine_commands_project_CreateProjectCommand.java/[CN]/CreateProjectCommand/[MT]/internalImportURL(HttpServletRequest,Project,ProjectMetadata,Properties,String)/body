{
  URL url=new URL(urlString);
  URLConnection connection=null;
  Importer importer=ImporterRegistry.guessUrlImporter(url);
  if (importer instanceof UrlImporter) {
    ((UrlImporter)importer).read(url,project,metadata,options);
  }
 else {
    try {
      connection=url.openConnection();
      connection.setConnectTimeout(5000);
      connection.connect();
    }
 catch (    Exception e) {
      throw new Exception("Cannot connect to " + urlString,e);
    }
    InputStream inputStream=null;
    try {
      inputStream=connection.getInputStream();
    }
 catch (    Exception e) {
      throw new Exception("Cannot retrieve content from " + url,e);
    }
    try {
      String contentType=connection.getContentType();
      int semicolon=contentType.indexOf(';');
      if (semicolon >= 0) {
        contentType=contentType.substring(0,semicolon);
      }
      importer=ImporterRegistry.guessImporter(contentType,url.getPath());
      internalInvokeImporter(project,importer,metadata,options,inputStream,connection.getContentEncoding());
    }
  finally {
      inputStream.close();
    }
  }
}
