{
  ZipOutputStream out=new ZipOutputStream(new FileOutputStream(file));
  try {
    out.putNextEntry(new ZipEntry("data.txt"));
    try {
      Writer writer=new OutputStreamWriter(out);
      try {
        Properties options=new Properties();
        options.setProperty("mode","save");
        saveToWriter(writer,options);
      }
  finally {
        writer.flush();
      }
    }
  finally {
      out.closeEntry();
    }
  }
  finally {
    out.close();
  }
}
