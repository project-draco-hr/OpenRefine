{
  ServletFileUpload upload=new ServletFileUpload();
  String url=null;
  FileItemIterator iter=upload.getItemIterator(request);
  while (iter.hasNext()) {
    FileItemStream item=iter.next();
    String name=item.getFieldName().toLowerCase();
    InputStream stream=item.openStream();
    if (item.isFormField()) {
      if (name.equals("raw-text")) {
        Reader reader=new InputStreamReader(stream,"UTF-8");
        try {
          internalInvokeImporter(project,new TsvCsvImporter(),options,reader);
        }
  finally {
          reader.close();
        }
      }
 else       if (name.equals("url")) {
        url=Streams.asString(stream);
      }
 else {
        options.put(name,Streams.asString(stream));
      }
    }
 else {
      String fileName=item.getName().toLowerCase();
      try {
        internalImportFile(project,options,fileName,stream);
      }
  finally {
        stream.close();
      }
    }
  }
  if (url != null && url.length() > 0) {
    internalImportURL(request,project,options,url);
  }
}
