{
  ServletFileUpload upload=new ServletFileUpload();
  FileItemIterator iter=upload.getItemIterator(request);
  while (iter.hasNext()) {
    FileItemStream item=iter.next();
    if (!item.isFormField()) {
      String fileName=item.getName();
      if (fileName.length() > 0) {
        InputStream stream=item.openStream();
        try {
          File file=new File(job.dir,"data");
          this.accessTime=new Date();
          this.contentType=item.getContentType();
          this.encoding=request.getCharacterEncoding();
          this.originalFileName=fileName;
          this.size=saveStreamToFileOrDir(item.openStream(),file,this.contentType,fileName,job,request.getContentLength());
          this.isArchive=file.isDirectory();
        }
  finally {
          stream.close();
        }
      }
    }
  }
}
