{
  if (args.length == 1 || args.length == 2) {
    String s=args[0].toString();
    s=s.replaceAll("\\s+","_");
    if (args.length == 2) {
      String base=args[1].toString();
      URI base_uri;
      try {
        base_uri=new URI(base);
        return base_uri.resolve(s).toString();
      }
 catch (      URISyntaxException e) {
        return new EvalError(ControlFunctionRegistry.getFunctionName(this) + " unable to encode");
      }
    }
    try {
      return URLEncoder.encode(s,"UTF-8");
    }
 catch (    UnsupportedEncodingException e) {
      return new EvalError(ControlFunctionRegistry.getFunctionName(this) + " unable to encode");
    }
  }
  return new EvalError(ControlFunctionRegistry.getFunctionName(this) + " expects 1 string");
}
