{
  Properties options=ParsingUtilities.parseUrlParameters(request);
  long jobID=Long.parseLong(options.getProperty("jobID"));
  ImportJob job=ImportManager.singleton().getJob(jobID);
  if (job == null) {
    respondWithErrorPage(request,response,"No such import job",null);
    return;
  }
 else   if (job.state != State.NEW) {
    respondWithErrorPage(request,response,"Import job already started",null);
    return;
  }
  Class<? extends ImportSource> importSourceClass=ImportManager.getImportSourceClass(options.getProperty("source"));
  if (importSourceClass == null) {
    respondWithErrorPage(request,response,"No such import source class",null);
    return;
  }
  try {
    ImportSource importSource=importSourceClass.newInstance();
    job.importSource=importSource;
    job.state=State.RETRIEVING_DATA;
    importSource.retrieveContent(request,options,job);
    job.retrievingProgress=100;
    job.state=State.READY;
  }
 catch (  Throwable e) {
    e.printStackTrace();
    job.state=State.ERROR;
    job.errorMessage=e.getLocalizedMessage();
    job.exception=e;
    respondWithErrorPage(request,response,"Failed to kick start import job",e);
  }
}
