def test_gridworks():
    client = WindmillTestClient(__name__)
    client.click(link=u'WM Food 1')
    client.waits.forPageLoad(timeout=u'20000')
    filter_column(client, 'Shrt_Desc')
    client.click(jquery=u'(".menu-item:contains(\'Custom Text Facet\')")[0]')
    client.type(jquery=u'(".expression-preview-code")[0]', text=u"value.split(',')[0]")
    client.click(jquery=u'("button:contains(\'OK\')")[0]')
    assert_expected_top_value(client, 'SPAGHETTIOS')
    client.click(jquery=u'("a:contains(\'re-sort by count\')")[0]')
    assert_expected_top_value(client, 'BEEF')
    client.click(jquery=u'("a.facet-choice-label:contains(\'BEEF\')")[0]')
    client.asserts.assertText(jquery=u'("span.viewPanel-summary-row-count")[0]', validator=u'457')
    assert (client.execJS(js=u'$(".facet-panel span:contains(\'Water\')").length')['output'] == 0)
    filter_column(client, 'Water')
    client.click(jquery=u'(".menu-item:contains(\'Numeric Facet\')")[0]')
    assert (client.execJS(js=u'$(".facet-panel span:contains(\'Water\')").length')['output'] > 0)
    client.dragDropElem(jquery=u'("a.ui-slider-handle")[0]', pixels=u'150, 0')
    client.asserts.assertText(jquery=u'("span.viewPanel-summary-row-count")[0]', validator=u'457')
