{
  try {
    Project project=getProject(request);
    Engine engine=getEngine(request,project);
    TripleloaderExporter exporter=new TripleloaderExporter();
    StringWriter triples=new StringWriter(10 * 1024 * 1024);
    exporter.export(project,new Properties(),engine,triples);
    String source_name=request.getParameter("source_name");
    String source_id=request.getParameter("source_id");
    String graph=request.getParameter("graph");
    String result=FreebaseUtils.uploadTriples(request,graph,source_name,source_id,triples.toString());
    response.setCharacterEncoding("UTF-8");
    response.setHeader("Content-Type","application/json");
    try {
      new JSONObject(result);
      response.getWriter().write(result);
    }
 catch (    JSONException e) {
      respond(response,"500 Error",result);
    }
  }
 catch (  Exception e) {
    respondException(response,e);
  }
}
