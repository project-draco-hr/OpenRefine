{
  if (i2 <= last) {
    chPrev=ch2;
    ch2=ll8[tPos];
    tPos=tt[tPos];
    if (rNToGo == 0) {
      rNToGo=rNums[rTPos];
      rTPos++;
      if (rTPos == 512) {
        rTPos=0;
      }
    }
    rNToGo--;
    ch2^=(int)((rNToGo == 1) ? 1 : 0);
    i2++;
    currentChar=ch2;
    currentState=RAND_PART_B_STATE;
    mCrc.updateCRC(ch2);
  }
 else {
    endBlock();
    initBlock();
    setupBlock();
  }
}
