{
  File tempFile;
  try {
    tempFile=File.createTempFile("refine-import-",".marc.xml");
  }
 catch (  IOException e) {
    exceptions.add(new ImportException("Unexpected error creating temp file",e));
    return;
  }
  try {
    OutputStream os=new FileOutputStream(tempFile);
    try {
      MarcWriter writer=new MarcXmlWriter(os,true);
      MarcPermissiveStreamReader reader=new MarcPermissiveStreamReader(inputStream,true,true);
      while (reader.hasNext()) {
        Record record=reader.next();
        writer.write(record);
      }
      writer.close();
    }
  finally {
      try {
        os.close();
      }
 catch (      IOException e) {
      }
    }
    InputStream is=new FileInputStream(tempFile);
    try {
      super.parseOneFile(project,metadata,job,fileSource,inputStream,rootColumnGroup,limit,options,exceptions);
    }
  finally {
      try {
        is.close();
      }
 catch (      IOException e) {
      }
    }
  }
 catch (  FileNotFoundException e) {
    exceptions.add(new ImportException("Input file not found",e));
    return;
  }
 finally {
    tempFile.delete();
  }
}
